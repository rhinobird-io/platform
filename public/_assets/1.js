webpackJsonp([1],{560:function(e,t,n){"use strict";var r=n(111),i=n(300),o=n(460),a=n(437),s=n(390),u=n(554);n(561),e.exports=r.createClass({displayName:"exports",mixins:[r.addons.LinkedStateMixin],getInitialState:function(){var e=o.getUser();return{uniqueName:e.name,displayName:e.realname,email:e.email,oldPwd:"",newPwd:"",confirmPwd:"",user:e}},componentDidMount:function(){this.props.setTitle("Profile")},_updateUser:function(){var e=this;$.post("/platform/api/user/info",{realname:this.state.displayName}).then(function(t){u.updateLogin(t),e.refs.saveSuccessSnackbar.show()}).fail(function(){e.refs.saveFailSnackbar.show()})},_changePassword:function(){var e=this;return this.setState({passwordError:void 0,passwordIncorrect:void 0}),this.state.confirmPwd!==this.state.newPwd?void this.setState({passwordError:"Password do not match"}):void $.post("/platform/api/user/password",{password:this.state.oldPwd,newPassword:this.state.newPwd}).then(function(){e.setState({oldPwd:"",newPwd:"",confirmPwd:""}),e.refs.changeSuccessSnackbar.show()}).fail(function(t){401===t.status?e.setState({passwordIncorrect:"Old password incorrect"}):e.refs.changeFailSnackbar.show()})},render:function(){var e=this;return r.createElement(s.Layout,{centerJustified:!0,wrap:!0,className:"profile-page"},r.createElement(i.Snackbar,{message:"User information has been saved",ref:"saveSuccessSnackbar"}),r.createElement(i.Snackbar,{message:"Failed to update user information",ref:"saveFailSnackbar"}),r.createElement(i.Snackbar,{message:"Password has been saved",ref:"changeSuccessSnackbar"}),r.createElement(i.Snackbar,{message:"Failed to change password",ref:"changeFailSnackbar"}),r.createElement("div",{className:"paper-outer-container"},r.createElement(i.Paper,{zDepth:1},r.createElement("div",{className:"paper-inner-container"},r.createElement("div",{className:"mui-font-style-headline"},"User information"),r.createElement(a.Avatar,{onMouseOver:function(){e.setState({showTooltip:!0})},onMouseOut:function(){e.setState({showTooltip:!1})},scale:2.5,link:!1,member:this.state.user,className:"avatar"}),r.createElement(i.Tooltip,{className:"tooltip",label:"You can change your avatar on gravatar.com",show:this.state.showTooltip}),r.createElement(i.TextField,{floatingLabelText:"Email",type:"email",valueLink:this.linkState("email"),disabled:!0}),r.createElement("div",{className:"uniqueNameField"},r.createElement("span",{className:"mui-font-style-caption"},"@"),r.createElement(i.TextField,{className:"textField",floatingLabelText:"Unique name",valueLink:this.linkState("uniqueName"),disabled:!0})),r.createElement(i.TextField,{floatingLabelText:"Display name",valueLink:this.linkState("displayName")}),r.createElement("div",{className:"rightButton"},r.createElement(i.RaisedButton,{primary:!0,label:"Save",onClick:this._updateUser}))))),r.createElement("div",{className:"paper-outer-container"},r.createElement(i.Paper,{zDepth:1},r.createElement("div",{className:"paper-inner-container"},r.createElement("h3",null,"Change password"),r.createElement(i.TextField,{floatingLabelText:"Old password",type:"password",valueLink:this.linkState("oldPwd"),errorText:this.state.passwordIncorrect}),r.createElement(i.TextField,{floatingLabelText:"New password",type:"password",valueLink:this.linkState("newPwd")}),r.createElement(i.TextField,{floatingLabelText:"Confirm new password",type:"password",valueLink:this.linkState("confirmPwd"),errorText:this.state.passwordError}),r.createElement("div",{className:"rightButton"},r.createElement(i.RaisedButton,{primary:!0,label:"Reset",onClick:this._changePassword}))))))}})},561:function(e,t,n){var r=n(562);"string"==typeof r&&(r=[[e.id,r,""]]);n(415)(r,{})},562:function(e,t,n){t=e.exports=n(414)(),t.push([e.id,".profile-page{padding:24px;margin:0 auto}.profile-page .paper-outer-container{width:600px;margin:24px}.profile-page .paper-inner-container{position:relative;padding:24px}.profile-page .paper-inner-container .mui-text-field{width:100%}.profile-page .rightButton{margin-top:1em;text-align:right}.profile-page .uniqueNameField{position:relative}.profile-page .uniqueNameField .mui-text-field.mui-has-floating-labels:not(.mui-is-focused):not(.mui-has-value) .mui-text-field-floating-label,.profile-page .uniqueNameField input{padding-left:1em}.profile-page .uniqueNameField span{position:absolute;top:33px;font-size:16px!important}.profile-page .avatar{position:absolute;right:24px;top:24px}.profile-page .tooltip{right:24px;top:70px}",""])}});